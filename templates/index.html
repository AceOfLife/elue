<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Elue 2.0</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container">
        <h1>Campaign TRP &amp; GRP Simulator</h1>
        <p>Enter your campaign details below to predict your TRP and GRP.</p>
        
        Manual Input Form
        <form action="/predict/" method="post">
            ... original form unchanged ...
            <div class="form-group">
                <label for="Category">Category:</label>
                <select id="Category" name="Category" required>
                    <option value="" disabled selected>Select a category</option>
                    <option value="oralcare">oralcare</option>
                    <option value="seasoning">seasoning</option>
                    <option value="savoury">savoury</option>
                    <option value="skincleansing">skincleansing</option>
                    <option value="nutritiondrinks">nutritiondrinks</option>
                    <option value="tea">tea</option>
                    <option value="fabclean">fabclean</option>
                    <option value="fabriccarepowder">fabriccarepowder</option>
                    <option value="skincare">skincare</option>
                    <option value="dishrestroomwash">dishrestroomwash</option>
                    <option value="spreads">spreads</option>
                    <option value="coffee">coffee</option>
                    <option value="antisepticdisinfectant">antisepticdisinfectant</option>
                    <option value="hairstylingaidextension">hairstylingaidextension</option>
                    <option value="dishwash">dishwash</option>
                    <option value="insecticidesrepellents">insecticidesrepellents</option>
                    <option value="haircaretreatment">haircaretreatment</option>
                    <option value="deodorants">deodorants</option>
                    <option value="deodorizers">deodorizers</option>
                    <option value="fabriccareliquid">fabriccareliquid</option>
                    <option value="teaherbal">teaherbal</option>
                    <option value="handwashdisinfectant">handwashdisinfectant</option>
                    <option value="lavatorycare">lavatorycare</option>
                    <option value="teaicetea">teaicetea</option>
                    <option value="antisepticsanitizer">antisepticsanitizer</option>
                </select>
            </div>

            <div class="form-group">
                <label for="Month_name">Month:</label>
                <select id="Month_name" name="Month_name" required>
                    <option value="">Select Month</option>
                    <option value="January">January</option>
                    <option value="February">February</option>
                    <option value="March">March</option>
                    <option value="April">April</option>
                    <option value="May">May</option>
                    <option value="June">June</option>
                    <option value="July">July</option>
                    <option value="August">August</option>
                    <option value="September">September</option>
                    <option value="October">October</option>
                    <option value="November">November</option>
                    <option value="December">December</option>
                </select>
            </div>

            <div class="form-group">
                <label for="Daypart">Daypart:</label>
                <select id="Daypart" name="Daypart" required>
                    <option value="" disabled selected>Select a daypart</option>
                    <option value="evening">evening</option>
                    <option value="morning">morning</option>
                    <option value="morning_drive">morning_drive</option>
                    <option value="afternoon">afternoon</option>
                    <option value="afternoon_drive">afternoon_drive</option>
                    <option value="mid_morning">mid_morning</option>
                    <option value="overnight">overnight</option>
                    <option value="late_night">late_night</option>
                    <option value="late_evening">late_evening</option>
                </select>
            </div>

            <div class="form-group">
                <label for="Spend">Total Spend (N):</label>
                <input type="number" step="any" id="Spend" name="Spend" placeholder="e.g., 100000" required>
            </div>

            <div class="form-group">
                <label for="Normalize_30s">Normalize 30s:</label>
                <input type="number" step="any" id="Normalize_30s" name="Normalize_30s" placeholder="e.g., 1.0" required>
            </div>

            <div class="form-group">
                <label for="Duration">Duration (sec):</label>
                <input type="number" step="any" id="Duration" name="Duration" placeholder="e.g., 30" required>
            </div>

            <div class="form-group">
                <label for="stations">Select Stations:</label>
                <select id="stations" name="stations" multiple size="6" required>
                    {% for st in stations %}
                        <option value="{{ st }}">{{ st }}</option>
                    {% endfor %}
                </select>
                <small>Hold Ctrl (Cmd on Mac) to select multiple</small>
            </div>

            <button type="submit">Run Campaign Simulation</button>
        </form>

        <hr style="margin: 40px 0;">

        CSV Upload Form
        <h2>Or Upload Campaign Data via CSV</h2>
        <form action="/predict_batch/" method="post" enctype="multipart/form-data">
            <div class="form-group">
                <label for="file">Upload CSV File:</label>
                <input type="file" id="file" name="file" accept=".csv" required>
                <small>Required columns: Category, Month_name, Daypart, Station, Normalize 30s, Duration. Spend optional.</small>
            </div>
            <button type="submit">Upload and Predict</button>
        </form>

        {% if results %}
    <h2>Per‐Station Results</h2>
    <table>
        <thead>
            <tr>
                <th>Station</th>
                <th>TRP</th>
                <th>GRP</th>
            </tr>
        </thead>
        <tbody>
            {% for row in results %}
                <tr>
                    <td>{{ row.Station }}</td>
                    <td>{{ '%.2f'|format(row.TRP) }}</td>
                    <td>{{ '%.2f'|format(row.GRP) }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
    

            <div class="summary">
                <h3>Overall Campaign</h3>
                <p><strong>Aggregate TRP:</strong> {{ campaign_trp }}</p>
                <p><strong>Aggregate GRP:</strong> {{ campaign_grp }}</p>
            </div>
        {% endif %}

        {% if message %}
            <p class="error"><strong>Error:</strong> {{ message }}</p>
        {% endif %}
    </div>
</body>
</html> -->


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elue 2.0 - TRP/GRP Simulator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css" rel="stylesheet">
    <link href="../static/styles.css" rel="stylesheet" />
    <style>
        /* Enhanced Modern Styles */
        .glass-morphism {
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.18);
        }
        
        .gradient-text {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .floating-card {
            animation: float 6s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .pulse-glow {
            animation: pulse-glow 2s ease-in-out infinite alternate;
        }
        
        @keyframes pulse-glow {
            from { box-shadow: 0 0 20px rgba(59, 130, 246, 0.4); }
            to { box-shadow: 0 0 30px rgba(59, 130, 246, 0.8); }
        }
        
        .slide-in-left {
            animation: slideInLeft 0.8s ease-out;
        }
        
        .slide-in-right {
            animation: slideInRight 0.8s ease-out;
        }
        
        @keyframes slideInLeft {
            from { transform: translateX(-100px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes slideInRight {
            from { transform: translateX(100px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .metric-counter {
            font-variant-numeric: tabular-nums;
        }
        
        .hover-lift {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .hover-lift:hover {
            transform: translateY(-8px);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }
        
        .gradient-border {
            border: double 3px transparent;
            background-image: linear-gradient(white, white), 
                              linear-gradient(135deg, #667eea, #764ba2);
            background-origin: border-box;
            background-clip: padding-box, border-box;
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50">
    <!-- Loading Overlay -->
    <div id="loading" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center">
        <div class="glass-morphism p-8 rounded-2xl text-center backdrop-blur-lg">
            <div class="animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-blue-500 mx-auto mb-4"></div>
            <p class="font-medium text-white text-lg">Calculating your campaign metrics...</p>
            <p class="text-blue-100 text-sm mt-2">Powered by AI-driven predictions</p>
        </div>
    </div>

    <!-- Enhanced Header -->
    <header class="gradient-bg text-white shadow-2xl relative overflow-hidden">
        <div class="absolute inset-0 bg-black opacity-10"></div>
        <div class="container mx-auto px-4 py-6 relative z-10">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-4">
                    <img src="{{ url_for('static', path='elue-logo1.png') }}" class="w-[120px] h-auto floating-card" />
                    <div class="h-8 w-px bg-white opacity-30"></div>
                    <div>
                        <h1 class="text-2xl font-bold gradient-text">TRP & GRP Campaign Simulator</h1>
                        <p class="text-blue-100 text-sm">AI-Powered Media Planning Platform</p>
                    </div>
                </div>
                <div class="flex items-center space-x-3">
                    <span class="glass-morphism px-4 py-2 rounded-full text-sm font-medium backdrop-blur-sm">
                        <i class="fas fa-rocket mr-2"></i>Enterprise Edition
                    </span>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <div class="{% if results %}max-w-full{% else %}max-w-6xl{% endif %} mx-auto">
            <!-- Enhanced Hero Section -->
            <section id="initialHero" class="mb-12 text-center" {% if results %}style="display: none;"{% endif %}>
                <div class="max-w-4xl mx-auto">
                    <h1 class="text-5xl font-bold gradient-text mb-6 slide-in-left">Optimize Your Media Campaign</h1>
                    <p class="text-xl text-gray-600 mb-8 slide-in-right">Leverage AI-powered predictions to maximize your TRP and GRP across Nigerian media channels</p>
                    
                    <!-- Feature Cards -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12">
                        <div class="bg-white rounded-2xl p-6 shadow-lg hover-lift border border-gray-100">
                            <div class="w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center mb-4">
                                <i class="fas fa-brain text-blue-600 text-xl"></i>
                            </div>
                            <h3 class="font-semibold text-gray-800 mb-2">AI-Powered Predictions</h3>
                            <p class="text-gray-600 text-sm">Machine learning models trained on historical campaign data</p>
                        </div>
                        
                        <div class="bg-white rounded-2xl p-6 shadow-lg hover-lift border border-gray-100">
                            <div class="w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center mb-4">
                                <i class="fas fa-chart-line text-green-600 text-xl"></i>
                            </div>
                            <h3 class="font-semibold text-gray-800 mb-2">Real-time Analytics</h3>
                            <p class="text-gray-600 text-sm">Instant performance metrics and visualization</p>
                        </div>
                        
                        <div class="bg-white rounded-2xl p-6 shadow-lg hover-lift border border-gray-100">
                            <div class="w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center mb-4">
                                <i class="fas fa-sliders-h text-purple-600 text-xl"></i>
                            </div>
                            <h3 class="font-semibold text-gray-800 mb-2">Multi-Channel Optimization</h3>
                            <p class="text-gray-600 text-sm">TV, Radio, and Digital media planning</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Enhanced Form Section -->
            <div id="formSection" class="mx-auto w-full max-w-4xl" {% if results %}style="display: none;"{% endif %}>
                <!-- Enhanced Manual Input Form -->
                <form action="/predict/" method="post" enctype="multipart/form-data" class="bg-white rounded-2xl shadow-2xl overflow-hidden mb-8 gradient-border">
                    <div class="p-8 border-b border-gray-200 bg-gradient-to-r from-blue-600 to-purple-600">
                        <h2 class="text-2xl font-bold text-white">Campaign Configuration</h2>
                        <p class="text-blue-100">Configure your media campaign parameters</p>
                    </div>
                    
                    <div class="p-8 space-y-8">
                        <!-- Basic Information Grid -->
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                            <!-- Audience -->
                            <div class="space-y-2">
                                <label class="block text-sm font-semibold text-gray-700 mb-2">
                                    <i class="fas fa-users mr-2 text-blue-500"></i>Target Audience
                                </label>
                                <input type="text" id="Audience" name="Audience" placeholder="e.g., Young Adults 18-35" required 
                                       class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-300">
                            </div>

                            <!-- Category -->
                            <div class="space-y-2">
                                <label class="block text-sm font-semibold text-gray-700 mb-2">
                                    <i class="fas fa-tags mr-2 text-green-500"></i>Product Category
                                </label>
                                <select id="Category" name="Category" required 
                                        class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-300">
                                    <option value="" disabled selected>Select category</option>
                                    <option value="oralcare">Oral Care</option>
                                    <option value="seasoning">Seasoning</option>
                                    <!-- ... other options ... -->
                                </select>
                            </div>

                            <!-- Month -->
                            <div class="space-y-2">
                                <label class="block text-sm font-semibold text-gray-700 mb-2">
                                    <i class="fas fa-calendar mr-2 text-purple-500"></i>Campaign Month
                                </label>
                                <select id="Month_name" name="Month_name" required 
                                        class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-300">
                                    <option value="">Select Month</option>
                                    <option value="January">January</option>
                                    <!-- ... other months ... -->
                                </select>
                            </div>

                            <!-- Daypart -->
                            <div class="space-y-2">
                                <label class="block text-sm font-semibold text-gray-700 mb-2">
                                    <i class="fas fa-clock mr-2 text-orange-500"></i>Daypart
                                </label>
                                <select id="Daypart" name="Daypart" required 
                                        class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-300">
                                    <option value="" disabled selected>Select daypart</option>
                                    <option value="evening">Evening</option>
                                    <!-- ... other dayparts ... -->
                                </select>
                            </div>

                            <!-- Campaign Dates -->
                            <div class="space-y-2">
                                <label class="block text-sm font-semibold text-gray-700 mb-2">
                                    <i class="fas fa-play-circle mr-2 text-green-500"></i>Start Date
                                </label>
                                <input type="date" id="CampaignStart" name="CampaignStart" required 
                                       class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-300">
                            </div>
                            
                            <div class="space-y-2">
                                <label class="block text-sm font-semibold text-gray-700 mb-2">
                                    <i class="fas fa-stop-circle mr-2 text-red-500"></i>End Date
                                </label>
                                <input type="date" id="CampaignEnd" name="CampaignEnd" required 
                                       class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-300">
                            </div>
                        </div>

                        <!-- Technical Parameters -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="space-y-2">
                                <label class="block text-sm font-semibold text-gray-700 mb-2">
                                    <i class="fas fa-ruler mr-2 text-blue-500"></i>Normalize 30s
                                </label>
                                <input type="number" step="any" id="Normalize_30s" name="Normalize_30s" placeholder="1.0" required 
                                       class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-300">
                            </div>

                            <div class="space-y-2">
                                <label class="block text-sm font-semibold text-gray-700 mb-2">
                                    <i class="fas fa-hourglass-half mr-2 text-purple-500"></i>Ad Duration (seconds)
                                </label>
                                <input type="number" step="any" id="Duration" name="Duration" placeholder="30" required 
                                       class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-300">
                            </div>
                        </div>

                        <!-- Budget Section -->
                        <div class="space-y-6">
                            <div class="flex items-center justify-between">
                                <h3 class="text-lg font-semibold text-gray-800">
                                    <i class="fas fa-money-bill-wave mr-2 text-green-500"></i>Budget Allocation
                                </h3>
                                <div class="flex items-center space-x-4 text-sm">
                                    <div class="flex items-center space-x-2">
                                        <div class="w-3 h-3 bg-blue-500 rounded-full"></div>
                                        <span class="text-gray-600">TV</span>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                                        <span class="text-gray-600">Radio</span>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <div class="w-3 h-3 bg-purple-500 rounded-full"></div>
                                        <span class="text-gray-600">Other</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Total Spend -->
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div class="space-y-2">
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">Total Campaign Budget (₦)</label>
                                    <div class="relative">
                                        <span class="absolute inset-y-0 left-0 flex items-center pl-4 text-gray-500">₦</span>
                                        <input type="number" step="any" id="Spend" name="Spend" placeholder="1,000,000" required 
                                               class="w-full pl-12 px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-300">
                                    </div>
                                </div>
                                
                                <!-- Budget Summary -->
                                <div class="bg-gradient-to-r from-blue-50 to-purple-50 p-6 rounded-xl border border-blue-100">
                                    <div class="flex justify-between items-center mb-3">
                                        <span class="text-sm font-medium text-gray-700">Total Allocated:</span>
                                        <span class="text-lg font-bold text-blue-600 metric-counter" id="total_allocated">₦0.00</span>
                                    </div>
                                    <div class="flex justify-between items-center">
                                        <span class="text-sm font-medium text-gray-700">Remaining Budget:</span>
                                        <span class="text-lg font-bold metric-counter" id="remaining_budget">₦0.00</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Media Budget Allocation -->
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                                <!-- TV Budget -->
                                <div class="space-y-2">
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">TV Budget (₦)</label>
                                    <div class="relative">
                                        <span class="absolute inset-y-0 left-0 flex items-center pl-4 text-gray-500">₦</span>
                                        <input type="number" id="tv_budget" name="tv_budget" min="0" step="any" 
                                               class="w-full pl-12 px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-300"
                                               oninput="calculateAllocationPercentages()">
                                    </div>
                                    <div class="flex justify-between items-center text-xs">
                                        <span class="text-blue-600 font-medium" id="tv_percentage">0%</span>
                                        <span class="text-gray-500">Allocation</span>
                                    </div>
                                </div>

                                <!-- Radio Budget -->
                                <div class="space-y-2">
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">Radio Budget (₦)</label>
                                    <div class="relative">
                                        <span class="absolute inset-y-0 left-0 flex items-center pl-4 text-gray-500">₦</span>
                                        <input type="number" id="radio_budget" name="radio_budget" min="0" step="any" 
                                               class="w-full pl-12 px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-300"
                                               oninput="calculateAllocationPercentages()">
                                    </div>
                                    <div class="flex justify-between items-center text-xs">
                                        <span class="text-green-600 font-medium" id="radio_percentage">0%</span>
                                        <span class="text-gray-500">Allocation</span>
                                    </div>
                                </div>

                                <!-- Other Budget -->
                                <div class="space-y-2">
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">Digital/Other (₦)</label>
                                    <div class="relative">
                                        <span class="absolute inset-y-0 left-0 flex items-center pl-4 text-gray-500">₦</span>
                                        <input type="number" id="other_budget" name="other_budget" min="0" step="any" 
                                               class="w-full pl-12 px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-300"
                                               oninput="calculateAllocationPercentages()">
                                    </div>
                                    <div class="flex justify-between items-center text-xs">
                                        <span class="text-purple-600 font-medium" id="other_percentage">0%</span>
                                        <span class="text-gray-500">Allocation</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Enhanced Station Selection -->
                        <div class="space-y-3">
                            <label class="block text-sm font-semibold text-gray-700">
                                <i class="fas fa-satellite-dish mr-2 text-orange-500"></i>Select Media Stations
                            </label>
                            <select id="stationSelect" name="stations" multiple="multiple" class="w-full" required>
                                {% for st in stations %}
                                <option value="{{ st }}">{{ st }}</option>
                                {% endfor %}
                            </select>
                            <div id="stationNotFound" class="hidden mt-2 p-3 bg-red-50 text-red-700 rounded-lg text-sm">
                                <i class="fas fa-exclamation-triangle mr-2"></i>No matching stations found
                            </div>
                        </div>
                    </div>

                    <!-- Enhanced Logo Upload -->
                    <div class="p-8 border-t border-gray-200 bg-gray-50">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">
                            <i class="fas fa-image mr-2 text-indigo-500"></i>Brand Assets
                        </h3>
                        <div id="logoDropZone" class="border-2 border-dashed border-gray-300 rounded-2xl p-8 text-center cursor-pointer hover:bg-white transition-all duration-300 group">
                            <i class="fas fa-cloud-upload-alt text-4xl text-gray-400 mb-4 group-hover:text-blue-500 transition-colors"></i>
                            <p class="font-semibold text-gray-700 mb-2">Drag & drop your brand logo</p>
                            <p class="text-sm text-gray-500">or click to browse files (SVG, PNG, JPG, WebP)</p>
                            <input type="file" id="logoFile" name="logoFile" class="hidden" accept=".jpg,.jpeg,.png,.webp,.svg">
                            <input type="hidden" id="logoFileSelected" name="logoFileSelected" value="false">
                        </div>
                        <div id="logoFileInfo" class="hidden mt-4 p-4 bg-green-50 text-green-700 rounded-xl text-sm border border-green-200"></div>
                    </div>

                    <!-- Submit Button -->
                    <div class="px-8 py-6 bg-gradient-to-r from-blue-600 to-purple-600">
                        <button type="submit" class="w-full inline-flex items-center justify-center px-8 py-4 border border-transparent text-lg font-bold rounded-2xl shadow-lg text-white bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 focus:outline-none focus:ring-4 focus:ring-blue-300 transition-all duration-300 pulse-glow">
                            <i class="fas fa-rocket mr-3"></i> Launch Campaign Simulation
                        </button>
                    </div>
                </form>

                <!-- Enhanced CSV Upload -->
                <form action="/predict_batch/" method="post" enctype="multipart/form-data" class="bg-white rounded-2xl shadow-2xl overflow-hidden gradient-border">
                    <div class="p-8 border-b border-gray-200 bg-gradient-to-r from-green-600 to-teal-600">
                        <h2 class="text-2xl font-bold text-white">Bulk Campaign Upload</h2>
                        <p class="text-green-100">Upload CSV for multiple campaigns</p>
                    </div>
                    <div class="p-8">
                        <div id="csvDropZone" class="border-2 border-dashed border-gray-300 rounded-2xl p-12 text-center cursor-pointer hover:bg-gray-50 transition-all duration-300 group">
                            <i class="fas fa-file-csv text-5xl text-gray-400 mb-6 group-hover:text-green-500 transition-colors"></i>
                            <p class="font-semibold text-gray-700 text-lg mb-2">Drag & drop your CSV file</p>
                            <p class="text-gray-500">or click to browse files</p>
                            <input type="file" id="csvFile" name="csvFile" class="hidden" accept=".csv" required>
                        </div>
                        <div id="csvFileInfo" class="hidden mt-4 p-4 bg-green-50 text-green-700 rounded-xl text-sm border border-green-200"></div>
                    </div>
                    <div class="px-8 py-6 bg-gradient-to-r from-green-600 to-teal-600">
                        <button type="submit" class="w-full inline-flex items-center justify-center px-8 py-4 border border-transparent text-lg font-bold rounded-2xl shadow-lg text-white bg-gradient-to-r from-green-500 to-teal-500 hover:from-green-600 hover:to-teal-600 focus:outline-none focus:ring-4 focus:ring-green-300 transition-all duration-300">
                            <i class="fas fa-upload mr-3"></i> Process Bulk Campaigns
                        </button>
                    </div>
                </form>
            </div>

            <!-- Enhanced Results Section -->
            <div class="space-y-8" id="resultsSection" {% if not results %}style="display: none;"{% endif %}>
                <!-- Campaign Overview Hero -->
                <section class="text-center mb-12">
                    <div class="bg-gradient-to-r from-blue-600 to-purple-600 rounded-3xl p-12 text-white shadow-2xl">
                        <h2 class="text-4xl font-bold mb-4">Campaign Performance Overview</h2>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mt-8">
                            <div class="text-center">
                                <div class="text-5xl font-bold mb-2 metric-counter" id="reachCounter">{{ reach_pct|default('0', true) }}%</div>
                                <p class="text-blue-100">Total Reach</p>
                            </div>
                            <div class="text-center">
                                <div class="text-5xl font-bold mb-2 metric-counter" id="grpCounter">{{ campaign_grp|default('0', true) }}</div>
                                <p class="text-blue-100">Gross Rating Points</p>
                            </div>
                            <div class="text-center">
                                <div class="text-5xl font-bold mb-2 metric-counter" id="frequencyCounter">{{ avg_frequency|default('0', true) }}</div>
                                <p class="text-blue-100">Avg Frequency</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Performance Dashboard -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <!-- KPI Cards -->
                    <div class="space-y-6">
                        <div class="grid grid-cols-2 gap-6">
                            <div class="bg-white rounded-2xl p-6 shadow-lg border-l-4 border-blue-500 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">Total Investment</p>
                                        <p class="text-2xl font-bold text-gray-800">₦{{ total_spend if total_spend else '0' }}</p>
                                    </div>
                                    <div class="w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center">
                                        <i class="fas fa-money-bill-wave text-blue-600 text-xl"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="bg-white rounded-2xl p-6 shadow-lg border-l-4 border-purple-500 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">Target Rating</p>
                                        <p class="text-2xl font-bold text-gray-800">{{ campaign_trp if campaign_trp else '0' }}</p>
                                    </div>
                                    <div class="w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center">
                                        <i class="fas fa-bullseye text-purple-600 text-xl"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-2 gap-6">
                            <div class="bg-white rounded-2xl p-6 shadow-lg border-l-4 border-green-500 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">Cost Efficiency</p>
                                        <p class="text-2xl font-bold text-gray-800">₦{{ avg_cprp if avg_cprp else '0' }}</p>
                                    </div>
                                    <div class="w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center">
                                        <i class="fas fa-chart-line text-green-600 text-xl"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="bg-white rounded-2xl p-6 shadow-lg border-l-4 border-orange-500 hover-lift">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">Campaign Duration</p>
                                        <p class="text-2xl font-bold text-gray-800">{{ campaign_duration_weeks if campaign_duration_weeks else '0' }}w</p>
                                    </div>
                                    <div class="w-12 h-12 bg-orange-100 rounded-xl flex items-center justify-center">
                                        <i class="fas fa-clock text-orange-600 text-xl"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Reach Distribution -->
                    <div class="bg-white rounded-2xl p-6 shadow-lg hover-lift">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">Reach Distribution</h3>
                        <div class="space-y-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-3">
                                    <div class="w-4 h-4 bg-blue-500 rounded-full"></div>
                                    <span class="text-sm font-medium">Paid Reach</span>
                                </div>
                                <span class="text-lg font-bold text-blue-600">{{ paid_reach if paid_reach else '0' }}</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-3">
                                    <div class="w-4 h-4 bg-green-500 rounded-full"></div>
                                    <span class="text-sm font-medium">Owned Reach</span>
                                </div>
                                <span class="text-lg font-bold text-green-600">{{ owned_reach if owned_reach else '0' }}</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-3">
                                    <div class="w-4 h-4 bg-purple-500 rounded-full"></div>
                                    <span class="text-sm font-medium">Earned Reach</span>
                                </div>
                                <span class="text-lg font-bold text-purple-600">{{ earned_reach if earned_reach else '0' }}</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Continue with the rest of your results section, enhanced similarly -->
                <!-- ... (rest of your existing results HTML with enhanced styling) ... -->
            </div>
        </div>
    </main>

    <!-- Enhanced Footer -->
    <footer class="bg-gray-900 text-white mt-20">
        <div class="container mx-auto px-4 py-12">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <img src="{{ url_for('static', path='elue-logo1.png') }}" class="w-32 h-auto mb-4" />
                    <p class="text-gray-400">AI-Powered Media Planning Platform</p>
                </div>
                <div>
                    <h4 class="font-semibold mb-4">Platform</h4>
                    <ul class="space-y-2 text-gray-400">
                        <li><a href="#" class="hover:text-white transition-colors">Features</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">Pricing</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">API</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold mb-4">Resources</h4>
                    <ul class="space-y-2 text-gray-400">
                        <li><a href="#" class="hover:text-white transition-colors">Documentation</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">Blog</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">Support</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold mb-4">Connect</h4>
                    <div class="flex space-x-4">
                        <a href="#" class="w-10 h-10 bg-gray-800 rounded-lg flex items-center justify-center hover:bg-blue-600 transition-colors">
                            <i class="fab fa-linkedin-in"></i>
                        </a>
                        <a href="#" class="w-10 h-10 bg-gray-800 rounded-lg flex items-center justify-center hover:bg-blue-400 transition-colors">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a href="#" class="w-10 h-10 bg-gray-800 rounded-lg flex items-center justify-center hover:bg-gray-700 transition-colors">
                            <i class="fab fa-github"></i>
                        </a>
                    </div>
                </div>
            </div>
            <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
                <p>© 2025 Elue. All rights reserved. Built with ❤️ for media professionals.</p>
            </div>
        </div>
    </footer>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/countup.js@2.3.2/dist/countUp.min.js"></script>
    <script>
        // Enhanced JavaScript with animations
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize counters
          if (document.getElementById('reachCounter')) {
    const reachCounter = new CountUp('reachCounter', parseFloat('{{ reach_pct|default(0) }}') || 0, { duration: 2 });
    const grpCounter = new CountUp('grpCounter', parseFloat('{{ campaign_grp|default(0) }}') || 0, { duration: 2 });
    const frequencyCounter = new CountUp('frequencyCounter', parseFloat('{{ avg_frequency|default(0) }}') || 0, { duration: 2 });
    
    reachCounter.start();
    grpCounter.start();
    frequencyCounter.start();
}

            // Enhanced station dropdown
            $('#stationSelect').select2({
                placeholder: "Search and select media stations...",
                allowClear: true,
                width: '100%',
                templateResult: formatStation,
                templateSelection: formatStationSelection
            });

            function formatStation(station) {
                if (!station.id) return station.text;
                const $station = $('<span><i class="fas fa-tv mr-2 text-blue-500"></i>' + station.text + '</span>');
                return $station;
            }

            function formatStationSelection(station) {
                return station.text;
            }

            // Enhanced file upload with animations
            const logoDropZone = document.getElementById('logoDropZone');
            if (logoDropZone) {
                logoDropZone.addEventListener('dragover', function(e) {
                    e.preventDefault();
                    this.classList.add('border-blue-500', 'bg-blue-50');
                });

                logoDropZone.addEventListener('dragleave', function() {
                    this.classList.remove('border-blue-500', 'bg-blue-50');
                });

                logoDropZone.addEventListener('drop', function(e) {
                    e.preventDefault();
                    this.classList.remove('border-blue-500', 'bg-blue-50');
                    this.classList.add('border-green-500', 'bg-green-50');
                    
                    setTimeout(() => {
                        this.classList.remove('border-green-500', 'bg-green-50');
                    }, 1000);
                });
            }
        });

        // Enhanced budget calculation with animations
        function calculateAllocationPercentages() {
            const totalSpend = parseFloat(document.getElementById('Spend')?.value) || 0;
            const tvBudget = parseFloat(document.getElementById('tv_budget')?.value) || 0;
            const radioBudget = parseFloat(document.getElementById('radio_budget')?.value) || 0;
            const otherBudget = parseFloat(document.getElementById('other_budget')?.value) || 0;
            
            const totalAllocated = tvBudget + radioBudget + otherBudget;
            const remaining = totalSpend - totalAllocated;
            
            // Animate the counters
            animateValue('total_allocated', 0, totalAllocated, 1000, '₦');
            animateValue('remaining_budget', 0, remaining, 1000, '₦');
            
            // Calculate and animate percentages
            const tvPercentage = totalAllocated > 0 ? (tvBudget / totalAllocated) * 100 : 0;
            const radioPercentage = totalAllocated > 0 ? (radioBudget / totalAllocated) * 100 : 0;
            const otherPercentage = totalAllocated > 0 ? (otherBudget / totalAllocated) * 100 : 0;
            
            animateValue('tv_percentage', 0, tvPercentage, 1000, '', '%');
            animateValue('radio_percentage', 0, radioPercentage, 1000, '', '%');
            animateValue('other_percentage', 0, otherPercentage, 1000, '', '%');
        }

        function animateValue(id, start, end, duration, prefix = '', suffix = '') {
            const obj = document.getElementById(id);
            let startTimestamp = null;
            const step = (timestamp) => {
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                const value = Math.floor(progress * (end - start) + start);
                obj.innerHTML = prefix + value.toLocaleString() + suffix;
                if (progress < 1) {
                    window.requestAnimationFrame(step);
                }
            };
            window.requestAnimationFrame(step);
        }

        // Enhanced form submission
        document.querySelector('form[action="/predict/"]')?.addEventListener('submit', function(e) {
            const submitBtn = this.querySelector('button[type="submit"]');
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i> Processing...';
            submitBtn.disabled = true;
            
            document.getElementById('loading').classList.remove('hidden');
        });
    </script>
</body>
</html>